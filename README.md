# Rails on Docker

A simple setup to get you started with rails development on docker.

## Get Started

- Clone repo.
- Cd into the repo directory.

*If you are running docker on linux;*
> Check current user id(UID)by running `id` in your terminal.
> If the UID returned is `1000`, you can move on to the next step.
> If not, You will need to edit the Dockerfile's `USER`instruction.
> Replace the 1000 with the returned UID.

- Run `docker-compose run web rails new . --force --no-deps --database=postgresql` to generate a rails skeleton.

Issue.
At this point this error might occur.
 > Permission denied @ rb_sysopen - /myapp/tmp/.keep (Errno::EACCES).
A simple workaround in this case would be to change ownership of the tmp directory which is generated by the db service container.

- Run `sudo chown -R $USER:$USER .`
- Run `docker-compose build` Because you've now got a new Gemfile generated by rails.
      NB**You will need to run the above command to rebuild the container anytime you make changes to the gemfile or the Dockerfile**

To link the services and only expose the web app's port to users. I used docker-compose.yml.

- Head over to `config/database.yml` and edit it to have the following.
    ```yml
        default: &default
        adapter: postgresql
        encoding: unicode
        host: db
        username: postgres
        password:
        pool: 5

        development:
        <<: *default
        database: myapp_development

        test:
        <<: *default
        database: myapp_test
    ```
  
- Run `docker-compose up` to boot up the app.
- navigate to http://localhost:3000

## Notes

1. To stop the application:
   `docker-compose down`
2. To restrat the application:
   `docker-compose up`
3. To rebuild the application:
   `docker-compose up --build`

## Contents

### 1